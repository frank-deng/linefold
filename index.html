<!doctype html><html><head><meta charset="UTF-8"/><meta name="viewport" id="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/><title>Line Folding Test Page</title><style>body{color:#333;font-family:微软雅黑,sans;font-size:16px;padding:40px 10px 10px;user-select:none;-ms-user-select:none}input::-ms-clear{display:none;height:0;width:0}ribbon{user-drag:none;background-color:#a00;box-shadow:0 0 5px 2px #888;position:fixed;right:0;top:0;user-select:none}ribbon,ribbon a{display:block;overflow:hidden}ribbon a{border-bottom:1px solid #fff;border-top:1px solid #fff;color:#fff;font-size:12px;font-weight:700;line-height:30px;margin:2px 0;text-align:center;text-decoration:none;width:260px}@media only screen and (min-width:600px){body{padding-top:10px}ribbon{transform:translate(83px) rotate(45deg);transform-origin:50px 50%}.inputForm{margin-right:120px}}.inputItem,.inputItemGroup{display:inline-block;vertical-align:top}.inputItem{line-height:28px;margin-bottom:6px;margin-right:16px}.inputItem span{margin-right:8px}.inputItem input{-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dcdfe6;border-radius:4px;box-sizing:border-box;color:#333;display:inline-block;font-size:16px;height:28px;line-height:28px;margin:0;max-width:180px;outline:none;padding:0 8px;vertical-align:top}.inputItem input[type=number]{padding:0 0 0 8px;width:60px}.checkboxItem{line-height:28px;margin-bottom:6px;margin-right:16px}.checkboxItem,.checkboxItem input[type=checkbox]{cursor:pointer;display:inline-block;vertical-align:top}.checkboxItem input[type=checkbox]{border-radius:4px;box-sizing:border-box;height:16px;margin:6px 8px 0 0;width:16px}.displayFormTitle,.textInputTitle{line-height:28px}.textInput{-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dcdfe6;border-radius:4px;box-sizing:border-box;color:#333;font-size:16px;line-height:21px;margin:0;outline:none;padding:4px 8px;resize:none;width:100%}.displayFormTitle{display:none;margin-top:8px}.displayForm{display:none;overflow-x:auto;width:100%}.testCanvas{background-color:#fff;background-image:none;border:1px solid #dcdfe6;border-radius:4px;box-sizing:border-box;display:block}</style><script src="./dist/linefold.js"></script></head><body><ribbon><a href="https://github.com/frank-deng/linefold/">Fork me on GitHub</a></ribbon><div class="inputForm" id="inputForm"><div class="inputItem"><span translate="width">Width</span><input type="number" min="1" name="width" value="320"/></div><div class="inputItem"><span translate="fontSize">Font Size</span><input type="number" min="1" name="fontSize" value="16"/></div><div class="inputItem"><span translate="font">Font</span><input name="fontFamily" value="sans"/></div><div class="inputItemGroup"><label class="checkboxItem"><input type="checkbox" name="fontBold"/><span translate="bold">Bold</span></label><label class="checkboxItem"><input type="checkbox" name="fontItalic"/><span translate="italic">Italic</span></label></div><div class="textInputTitle" translate="text">Text</div><textarea class="textInput" name="textInput" rows="10"></textarea></div><div class="displayFormTitle" translate="effect" id="displayFormTitle">Effect</div><div class="displayForm" id="displayForm"><canvas class="testCanvas" id="testCanvas"></canvas></div></body><script>!function(){"use strict";function t(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,l=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw l}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"__locale",null),r(this,"__fallback",null),this.__data=t,this.__locale=this.__fallback=Object.keys(this.__data)[0],this.setLocale()}var a,o;return a=e,(o=[{key:"setLocale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Array.isArray(e)||(e=window.navigator.languages||[window.navigator.language]);var n,r=t(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;for(var o in this.__data)if(a.toLowerCase()==o.toLowerCase())return this.__locale=o,!0;for(var l in this.__data)if(0==a.toLowerCase().indexOf(l.toLowerCase()))return this.__locale=l,!0}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"get",value:function(t){try{var e=this.__data[this.__locale];if(e&&e[t])return e[t];if((e=this.__data[this.__fallback])[t])return e[t]}catch(t){console.error(t)}return t}}])&&n(a.prototype,o),e}();try{var o=new a({en:{title:"Line Folding Test Page",width:"Width",fontSize:"Font Size",font:"Font",bold:"Bold",italic:"Italic",text:"Text",effect:"Effect"},ja:{title:"テキストの改行のテストページ",width:"幅",fontSize:"サイズ",font:"フォント",bold:"太字",italic:"斜体",text:"テキスト",effect:"効果"},zh:{title:"文本换行算法测试页面",width:"宽度",fontSize:"字体大小",font:"字体",bold:"加粗",italic:"倾斜",text:"正文",effect:"效果"}});document.title=o.get("title");for(var l=document.querySelectorAll("[translate]"),i=0;i<l.length;i++){var c=l[i];c.innerHTML=o.get(c.getAttribute("translate"))}}catch(t){console.error("Failed to load translation",t)}var u=document.getElementById("testCanvas"),f=u.getContext("2d"),d=document.querySelector("[name=textInput]"),s=document.querySelector("[name=width]"),y=document.querySelector("[name=fontSize]"),h=document.querySelector("[name=fontFamily]"),v=document.querySelector("[name=fontBold]"),m=document.querySelector("[name=fontItalic]"),g=document.getElementById("displayFormTitle"),b=document.getElementById("displayForm");function _(){var t=d.value;if(!t)return g.style.display="none",void(b.style.display="none");var e=Number(s.value),n=Number(y.value),r=h.value,a=Math.ceil(3*n/2),o=n+"px "+r;m.checked&&(o="Italic "+o),v.checked&&(o="Bold "+o);var l=linefold(t,e,o);u.width=e,u.height=a*l.length,f.font=o,f.fillStyle="#000000",f.textBaseline="middle";for(var i=Math.round(a/2),c=0;c<l.length;c++){var _=l[c];f.fillText(_,0,i),i+=a}g.style.display="block",b.style.display="block"}var p=document.getElementById("inputForm");p.addEventListener("input",_),p.addEventListener("change",_)}();</script></html>