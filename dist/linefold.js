!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.linefold=t():e.linefold=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.d(t,{default:function(){return p}});var i={"!":!0,")":!0,",":!0,".":!0,":":!0,";":!0,"?":!0,"]":!0,"}":!0,"¨":!0,"·":!0,"ˇ":!0,"ˉ":!0,"―":!0,"‖":!0,"’":!0,"”":!0,"…":!0,"∶":!0,"、":!0,"。":!0,"〃":!0,"々":!0,"〉":!0,"》":!0,"」":!0,"』":!0,"】":!0,"〕":!0,"〗":!0,"！":!0,"＂":!0,"＇":!0,"）":!0,"，":!0,"．":!0,"：":!0,"；":!0,"？":!0,"］":!0,"｀":!0,"｜":!0,"｝":!0,"～":!0,"￠":!0},l={"(":!0,"[":!0,"{":!0,"·":!0,"‘":!0,"“":!0,"〈":!0,"《":!0,"「":!0,"『":!0,"【":!0,"〔":!0,"〖":!0,"（":!0,"．":!0,"［":!0,"｛":!0,"￡":!0,"￥":!0},u=null;try{var f=document.createElement("canvas");f.width=f.height=16,u=f.getContext("2d")}catch(e){console.info("HTML5 canvas not available, default canvas-based string length measuring will not work")}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.length)return null;var n,o=r(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;try{var i=a.exec(e);if(i&&0==i.index)return i[0]}catch(e){console.error(e)}}}catch(e){o.e(e)}finally{o.f()}return e[0]}function s(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],o=e.slice(),a=null;o.length;){var u=c(o,[].concat(n(t),[/^[^\S\r\n]+/,/^[A-Za-z0-9\u00a1-\u04ff]+[^\S\r\n]*/i]));o=o.slice(u.length),"\n"!=u&&r.length&&(l[a]||i[u]||/^[^\S\r\n]+$/.test(u))?r[r.length-1]+=u:r.push(u),a=u}return r}function h(e,t,n){for(var r=[],o=0,a=1,i=e.length;o<i&&a<=i;){var l=e.slice(o,a);n(l)<=t?a++:l.length<=1?(r.push(l[0]),o++,a++):(r.push(e.slice(o,a-1)),o=a-1)}return o<i&&r.push(e.slice(o,i)),r.length?r:[e]}function p(e,t,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){return u.measureText(e).width};if(u&&"string"==typeof o)u.font=o;else{if("function"!=typeof o)throw new TypeError("Second parameter must be a function for measuring string length");i=o}for(var l=s(e,a),f=l.length-1;f>=0;f--){var c=l[f];i(c)<=t||l.splice.apply(l,[f,1].concat(n(h(c,t,i))))}var p,d=[],y="",v=r(l);try{for(v.s();!(p=v.n()).done;){var g=p.value;"\n"!=g?i(y+g.replace(/\s+$/g,""))<=t?y+=g:(d.push(y.replace(/\s+$/g,"")),y=g):(d.push(y.replace(/\s+$/g,"")),y="")}}catch(e){v.e(e)}finally{v.f()}return y.length&&d.push(y.replace(/\s+$/g,"")),d}return t.default}()}));