!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.linefold=e():t.linefold=e()}(this,(function(){return function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){u=!0,i=t},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.d(e,{default:function(){return p}});var i={"!":!0,")":!0,",":!0,".":!0,":":!0,";":!0,"?":!0,"]":!0,"}":!0,"¨":!0,"·":!0,"ˇ":!0,"ˉ":!0,"―":!0,"‖":!0,"’":!0,"”":!0,"…":!0,"∶":!0,"、":!0,"。":!0,"〃":!0,"々":!0,"〉":!0,"》":!0,"」":!0,"』":!0,"】":!0,"〕":!0,"〗":!0,"！":!0,"＂":!0,"＇":!0,"）":!0,"，":!0,"．":!0,"：":!0,"；":!0,"？":!0,"］":!0,"｀":!0,"｜":!0,"｝":!0,"～":!0,"￠":!0},l={"(":!0,"[":!0,"{":!0,"·":!0,"‘":!0,"“":!0,"〈":!0,"《":!0,"「":!0,"『":!0,"【":!0,"〔":!0,"〖":!0,"（":!0,"．":!0,"［":!0,"｛":!0,"￡":!0,"￥":!0},u=null;try{var f=document.createElement("canvas");f.width=f.height=16,u=f.getContext("2d")}catch(t){console.info("HTML5 canvas not available, default canvas-based string length measuring will not work")}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.length)return null;var n,o=r(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;try{var i=a.exec(t);if(i&&0==i.index)return i[0]}catch(t){console.error(t)}}}catch(t){o.e(t)}finally{o.f()}return t[0]}function s(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],o=t.slice(),a=null;o.length;){var u=c(o,[].concat(n(e),[/^[^\S\r\n]+/,/^[A-Za-z0-9\u00a1-\u04ff]+[^\S\r\n]*/i]));o=o.slice(u.length),r.length&&"\n"!=u&&"\n"!=a&&(l[a]||i[u]||/^[^\S\r\n]+$/.test(u))?r[r.length-1]+=u:r.push(u),a=u}return r}function h(t,e,n){for(var r=[],o=0,a=1,i=t.length;o<i&&a<=i;){var l=t.slice(o,a);n(l)<=e?a++:l.length<=1?(r.push(l[0]),o++,a++):(r.push(t.slice(o,a-1)),o=a-1)}o<i&&r.push(t.slice(o,i));for(var u=r.length-1;u>=0;u--){var f=r.pop();if(f.trim().length){r.push(f);break}}return r.length?r:[t]}function p(t,e,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(t){return u.measureText(t).width};if(u&&"string"==typeof o)u.font=o;else{if("function"!=typeof o)throw new TypeError("Second parameter must be a function for measuring string length");i=o}for(var l=s(t,a),f=l.length-1;f>=0;f--){var c=l[f];i(c)<=e||l.splice.apply(l,[f,1].concat(n(h(c,e,i))))}var p,d=[],y="",v=r(l);try{for(v.s();!(p=v.n()).done;){var g=p.value;"\n"!=g?i(y+g)<=e?y+=g:i(y+g.replace(/\s+$/g,""))<=e?(d.push(y+g),y=""):(d.push(y),y=g):(d.push(y),y="")}}catch(t){v.e(t)}finally{v.f()}y.trim().length&&d.push(y);for(var m=d.length,b=0;b<m;b++)d[b]=d[b].replace(/\s+$/g,"");return d}return e.default}()}));